@model List<DiseaseHistory>;

<div class="container">
    <div class="row">
        <div class="col-md-4">
            <div class="flex-column flex-shrink-0 p-3 bg-light">
                <span class="fs-4">Пациент</span>
                <hr>
                <ul class="nav nav-pills flex-column mb-auto">
                    <li class="nav-item">
                        <a asp-action="Index" class="nav-link active" aria-current="page">
                            <svg class="bi pe-none me-2" width="16" height="16">
                                <use xlink:href="#home"></use>
                            </svg>Медицинская карта
                        </a>
                    </li>
                    <li>
                        <a asp-action="ActiveRecords" class="nav-link link-dark">
                            <svg class="bi pe-none me-2" width="16" height="16">
                                <use xlink:href="#speedometer2"></use>
                            </svg>Заказы
                        </a>
                    </li>
                    <li>
                        <a asp-action="Settings" class="nav-link link-dark">
                            <svg class="bi pe-none me-2" width="16" height="16">
                                <use xlink:href="#table"></use>
                            </svg>Настройки
                        </a>
                    </li>
                </ul>
                <hr>
            </div>
        </div>
        <div class="col-md-8">
            <div class="flex-column flex-shrink-0 p-3 bg-light" style="margin-left: 10px">
                <p>@ViewBag.user.Surname @ViewBag.user.Name @ViewBag.user.Patronymic</p>
                <p>Дата рождения: @ViewBag.user.Birthdate.ToLongDateString() (@(DateTime.Today.Year - ViewBag.user.Birthdate.Year) лет)</p>
                <p>Пол: @ViewBag.user.Gender</p>
                @foreach (Phonebook phones in ViewBag.phones)
                {
                    <p>@phones.Phone</p>
                }
            </div>
        </div>
    </div>
</div>

<div class="container mt-3">
    <div class="row">
        <div class="col-md-12">
            @if (Model is null || !Model.Any())
            {
                <p>Записей нет</p>
            }
            else
            {
                @foreach (var record in Model)
                {
                    <div class="card mb-3">
                        <div class="card-body">
                            <p>Лечащий врач @record.FkEmployeeNavigation.Surname @record.FkEmployeeNavigation.Name @record.FkEmployeeNavigation.Patronymic</p>
                            <p>@record.FkPatientNavigation.Gender</p>
                            <p>Номера телефонов:</p>
                            @foreach (var phone in record.FkEmployeeNavigation.FkUsersNavigation.Phonebooks.ToList())
                            {
                                <p>@phone.Phone</p>
                            }
                            @if (record.DateRecord is null)
                            {
                                <p>Время не назначено</p>
                            }
                            else
                            {
                                <p>Время посещения @record.DateRecord.Value</p>
                            }
                            <p>Диагноз @record.Diagnosis</p>
                            <p>Лечение:</p>
                            <p>@record.Therapy</p>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</div>